DÃ©marrÃ© par l'utilisateur Fabien de GREGORJ
Obtained Jenkinsfile from git https://github.com/Fa2b-ops/Restoproch.git
[Pipeline] Start of Pipeline
[Pipeline] node
Running on Jenkins in /var/lib/jenkins/workspace/RestoProch
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
Selected Git installation does not exist. Using Default
The recommended git tool is: NONE
using credential 52e5f4d8-3c96-494c-8cc0-920db23b4a33
 > git rev-parse --resolve-git-dir /var/lib/jenkins/workspace/RestoProch/.git # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/Fa2b-ops/Restoproch.git # timeout=10
Fetching upstream changes from https://github.com/Fa2b-ops/Restoproch.git
 > git --version # timeout=10
 > git --version # 'git version 2.39.5'
using GIT_ASKPASS to set credentials 
 > git fetch --tags --force --progress -- https://github.com/Fa2b-ops/Restoproch.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/main^{commit} # timeout=10
Checking out Revision 868d7bce4132ea2ea096eebca4dcb735bd570d60 (refs/remotes/origin/main)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f 868d7bce4132ea2ea096eebca4dcb735bd570d60 # timeout=10
Commit message: "modif scp"
 > git rev-list --no-walk 66ec554c4c29d2a198e6328f85581155024aa3b4 # timeout=10
[Pipeline] }
[Pipeline] // stage
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Clone Repository)
[Pipeline] checkout
Selected Git installation does not exist. Using Default
The recommended git tool is: NONE
using credential 52e5f4d8-3c96-494c-8cc0-920db23b4a33
 > git rev-parse --resolve-git-dir /var/lib/jenkins/workspace/RestoProch/.git # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/Fa2b-ops/Restoproch.git # timeout=10
Fetching upstream changes from https://github.com/Fa2b-ops/Restoproch.git
 > git --version # timeout=10
 > git --version # 'git version 2.39.5'
using GIT_ASKPASS to set credentials 
 > git fetch --tags --force --progress -- https://github.com/Fa2b-ops/Restoproch.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/main^{commit} # timeout=10
Checking out Revision 868d7bce4132ea2ea096eebca4dcb735bd570d60 (refs/remotes/origin/main)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f 868d7bce4132ea2ea096eebca4dcb735bd570d60 # timeout=10
Commit message: "modif scp"
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Change Directory)
[Pipeline] dir
Running in /var/lib/jenkins/workspace/RestoProch/App/hello-world-app
[Pipeline] {
[Pipeline] sh
+ ls -la
total 720
drwxr-xr-x   6 jenkins jenkins   4096 29 oct.  18:04 .
drwxr-xr-x   4 jenkins jenkins   4096 29 oct.  10:09 ..
drwxr-xr-x   3 jenkins jenkins   4096 29 oct.  17:59 build
-rw-r--r--   1 jenkins jenkins    310 29 oct.  10:09 .gitignore
drwxr-xr-x 874 jenkins jenkins  32768 29 oct.  17:59 node_modules
-rw-r--r--   1 jenkins jenkins    818 29 oct.  10:09 package.json
-rw-r--r--   1 jenkins jenkins 668588 29 oct.  18:04 package-lock.json
drwxr-xr-x   2 jenkins jenkins   4096 29 oct.  10:09 public
-rw-r--r--   1 jenkins jenkins   3359 29 oct.  10:09 README.md
drwxr-xr-x   2 jenkins jenkins   4096 29 oct.  17:08 src
[Pipeline] }
[Pipeline] // dir
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Install Dependencies)
[Pipeline] dir
Running in /var/lib/jenkins/workspace/RestoProch/App/hello-world-app
[Pipeline] {
[Pipeline] sh
+ npm install

up to date, audited 1360 packages in 2s

263 packages are looking for funding
  run `npm fund` for details

8 vulnerabilities (2 moderate, 6 high)

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
[Pipeline] }
[Pipeline] // dir
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build)
[Pipeline] dir
Running in /var/lib/jenkins/workspace/RestoProch/App/hello-world-app
[Pipeline] {
[Pipeline] sh
+ npm run build

> hello-world-app@0.1.0 build
> react-scripts build

Creating an optimized production build...
Compiled successfully.

File sizes after gzip:

  46.52 kB  build/static/js/main.a2992643.js
  1.78 kB   build/static/js/453.336d0b13.chunk.js
  513 B     build/static/css/main.f855e6bc.css

The project was built assuming it is hosted at /.
You can control this with the homepage field in your package.json.

The build folder is ready to be deployed.
You may serve it with a static server:

  npm install -g serve
  serve -s build

Find out more about deployment here:

  https://cra.link/deployment

[Pipeline] }
[Pipeline] // dir
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Test)
[Pipeline] dir
Running in /var/lib/jenkins/workspace/RestoProch/App/hello-world-app
[Pipeline] {
[Pipeline] sh
+ npm test

> hello-world-app@0.1.0 test
> react-scripts test

  console.error
    Warning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`. Import `act` from `react` instead of `react-dom/test-utils`. See https://react.dev/warnings/react-dom-test-utils for more info.

    [0m [90m 3 |[39m
     [90m 4 |[39m test([32m'renders Hello World message'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 5 |[39m   render([33m<[39m[33mApp[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m   |[39m         [31m[1m^[22m[39m
     [90m 6 |[39m   [36mconst[39m helloElement [33m=[39m screen[33m.[39mgetByText([35m/Hello World !!!/i[39m)[33m;[39m
     [90m 7 |[39m   expect(helloElement)[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 8 |[39m })[33m;[39m[0m

      at printWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:71:30)
      at error (node_modules/react-dom/cjs/react-dom-test-utils.development.js:45:7)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1736:7)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/App.test.js:5:9)
      at TestScheduler.scheduleTests (node_modules/@jest/core/build/TestScheduler.js:333:13)
      at runJest (node_modules/@jest/core/build/runJest.js:404:19)
      at _run10000 (node_modules/@jest/core/build/cli/index.js:320:7)
      at runCLI (node_modules/@jest/core/build/cli/index.js:173:3)

PASS src/App.test.js
  âœ“ renders Hello World message (30 ms)

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        0.785 s, estimated 1 s
Ran all test suites.
[Pipeline] }
[Pipeline] // dir
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Deploy)
[Pipeline] sh
+ scp -o StrictHostKeyChecking=no -r App/hello-world-app/build/asset-manifest.json App/hello-world-app/build/favicon.ico App/hello-world-app/build/index.html App/hello-world-app/build/logo192.png App/hello-world-app/build/logo512.png App/hello-world-app/build/manifest.json App/hello-world-app/build/robots.txt App/hello-world-app/build/static azureuser@52.178.5.218:/var/www/restoproch-frontend/
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Declarative: Post Actions)
[Pipeline] echo
Deployment successful!
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
Finished: SUCCESS